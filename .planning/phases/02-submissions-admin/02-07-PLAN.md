---
phase: 02-submissions-admin
plan: 07
type: execute
wave: 5
depends_on: ["02-04", "02-05", "02-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Complete submission-to-approval flow works end-to-end"
    - "Admin dashboard is accessible and functional"
    - "Public directory reflects approved listings"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 2 features work end-to-end through human testing of the complete submission and admin moderation workflow.

Purpose: Phase 2 has multiple interconnected features (public form, geocoding, duplicate detection, admin auth, moderation queue, listing CRUD). This checkpoint ensures everything works together before moving to Phase 3.

Output: Human verification that all success criteria are met.
</objective>

<execution_context>
@/Users/vincecain/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vincecain/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: End-to-end verification of Phase 2 submission and admin workflow</name>
  <action>
Human verifies all Phase 2 features work end-to-end. Complete Phase 2 implementation includes: public submission form with geocoding and duplicate detection, Clerk authentication for admin access, moderation queue with approve/reject, and direct listing CRUD management.
  </action>
  <verify>
**Prerequisites:**
- Ensure `.env` has all required variables: DATABASE_URL, MAPBOX_ACCESS_TOKEN, NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY, CLERK_SECRET_KEY
- Run `npm run db:push` to apply migrations
- Run `npm run dev` to start development server

**Test 1: Public Submission Form**
1. Visit http://localhost:3000/submit
2. Fill in required fields (name, email, category, at least one specialty, Louisville address)
3. Submit the form
4. Verify success page appears at /submit/success
5. Try submitting with invalid email — verify error message appears
6. Try submitting with address outside Louisville — verify bounds error

**Test 2: Admin Authentication**
7. Visit http://localhost:3000/admin
8. Verify redirect to /sign-in page
9. Sign in with Clerk credentials
10. Verify admin dashboard loads with stat cards

**Test 3: Moderation Queue**
11. Navigate to /admin/pending
12. Verify the submission from Test 1 appears in the table
13. Click Approve on the submission
14. Verify submission disappears from pending queue
15. Navigate to /admin/listings — verify approved listing appears
16. Navigate to http://localhost:3000 — verify listing appears in public directory

**Test 4: Reject Flow**
17. Submit another listing via /submit
18. Navigate to /admin/pending
19. Click Reject, add optional notes, confirm
20. Verify submission disappears from pending queue
21. Verify rejected submission does NOT appear in public directory

**Test 5: Direct Listing Management**
22. Navigate to /admin/listings/new
23. Create a new listing with all fields
24. Verify it appears in /admin/listings table and public directory
25. Click Edit on any listing
26. Change the name and save
27. Verify change is reflected in listing table
28. Delete a listing and verify it disappears

**Test 6: Duplicate Detection**
29. Submit a listing with the same name as an existing approved listing
30. Verify duplicate warning is shown (or submission is flagged for admin)
31. In /admin/pending, verify duplicate flag is visible on the submission
  </verify>
  <done>All 6 test scenarios pass. Submission-to-approval flow works end-to-end. Admin dashboard functional. Public directory reflects approved listings.</done>
  <resume-signal>Type "approved" or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All Phase 2 success criteria verified through manual testing:
1. Stakeholder can submit a new listing via public form
2. Submitted addresses are validated and geocoded within Louisville bounds
3. System flags potential duplicate submissions
4. Collab staff can log in to secure admin dashboard
5. Admin can view pending submissions in moderation queue
6. Admin can approve, reject, or edit submissions
7. Admin can create and edit listings directly
</verification>

<success_criteria>
All 6 test scenarios pass without errors. Changes are immediately reflected across admin and public views.
</success_criteria>

<output>
After completion, create `.planning/phases/02-submissions-admin/02-07-SUMMARY.md`
</output>
